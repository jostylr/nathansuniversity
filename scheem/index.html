<!DOCTYPE html>
<html lang="en">

<head>
  
  <script src="jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="bsDropDown.js"></script>
  <script src="run.js"></script>
  <link rel="stylesheet" href="vendor/bs.css" type="text/css" media="screen" title="no title" charset="utf-8">
  <style type="text/css">
    body {
      padding-top : 40px;
    }
    pre {word-break:normal}
    
  </style>
    
  <script src="vendor/CodeMirror/lib/codemirror.js" type="text/javascript" charset="utf-8"></script>
  <link rel="stylesheet" href="vendor/CodeMirror/lib/codemirror.css" type="text/css" media="screen" title="no title" charset="utf-8">
  <script src="vendor/CodeMirror/lib/util/runmode.js" type="text/javascript" charset="utf-8"></script>
  <script src="vendor/CodeMirror/mode/scheme/scheme.js" type="text/javascript" charset="utf-8"></script>
  
  <link rel="stylesheet" href="vendor/vs.css" type="text/css" media="screen" title="no title" charset="utf-8">
  <style type="text/css">.CodeMirror, #result {min-height: 20em; border-style: solid }</style>
  
  <script type="text/javascript">     
  $(document).ready(function () {
    $('.dropdown-toggle').dropdown()
    
    //get textareas, add in drop downs, get a starting value randomly from them
    var drop$ = $("#examples textarea").each(function () {
      var self = this;
      var name = this.id;
      $("<li><a href=\"#\">"+name+"</a></li>").click(function(){
        fullEditor.setValue(self.value);
        $("#eval").click();
      }).appendTo("#exdrop");
    });
    
    
    var src = drop$[Math.floor(Math.random() * (drop$.length))].value;
    
    var  fullEditor =  CodeMirror(document.getElementById("mirror"), {
          value : src
        , mode : "scheme"
        , lineNumbers : true
        , lineWrapping : true
        , extraKeys : {
          'Cmd-Enter' : function () {
            $("#eval").click();
          }
        }
      })
    ;
      
    var sourced = false;
      
    $("#eval").click(function () {
      var str = fullEditor.getValue();
      var out = run(str);
      $("#result").html("<p>The result is:</p><p>"+out+"</p>");
    }).click(); //#full
    $("#clear").click(function () {
      fullEditor.setValue('');
    });




  }); //ready
  
  
  </script>
  
</head>

<body>
  
  <!-- should do navbar here-->
   <div class="navbar navbar-fixed-top">
     <div class="navbar-inner">
       <div class="container-fluid">
         <a class="brand" href="#">jostylr's Scheem</a>
         <ul class="nav">
           <li class="active">
             <a href="#">REPL</a>
           </li>
           <li><a href="test.html">Test</a></li>
           <li><a href="docs.html">Docs</a></li>
           <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"> Examples <b class="caret"></b></a>
              <ul id="exdrop" class="dropdown-menu">
              </ul>
         </ul>
       </div>
     </div>
   </div>
  
  <br/><br/>
  
  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span1"></div>
      <div class="span5"><div id="mirror"></div></div>
      <div class="span5"><div id="result"></div>
      </div>      
      <div class="span1"></div>
    
    </div>
  
  <div class="row-fluid">
    <div class="span4"></div>
    <div class="span4">
      <button class="btn btn-primary" title="cmd+enter" id="eval">Eval</button>
      <button class="btn btn-warning" title="cmd+a ." id="clear">Clear</button>
            
    </div>
    <div class="span4"></div>
  <div class="row-fluid"><div class="span12"><div id="sourceOut"></div>
  </div></div>
  
  </div>
  
  <div class="hide" id="examples">
    <textarea id="Hash">(define x (# y 3 z 
  (lambda (n) 
      (+ (. this 'y) n)))) 
((. x 'z) 5)</textarea>
    <textarea id="Factorial">(define factorial 
   (lambda (n) 
     (if (= n 0) 
         1 
         (* n (factorial (- n 1)))))) 

(factorial 10)</textarea>
  </div>
  
</body>